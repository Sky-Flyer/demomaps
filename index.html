<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta charset="utf-8" />
	<title>Andis Multimap Version 150327-1356</title>
	<!-- style="-moz-user-select: none;" -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />	
	<!-- favicon -->
	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
	<link rel="shortcut icon" type="image/ico" href="favicon.ico" />
	<link rel="apple-touch-icon" href="favicon.png"/>
	<link rel="icon" type="image/x-icon" href="favicon.ico" />
	<!-- Leaflet -->
	<link rel="stylesheet" href="./leaflet-0.7.3/leaflet.css" />
	<script src="./leaflet-0.7.3/leaflet.js"></script>
	<!-- Leaflet-Plugins -->
	<link rel="stylesheet" href="./styledLayerControl.css" />
	<link rel="stylesheet" href="./leaflet-search.css" />
	<link rel="stylesheet" href="./leaflet-0.7.3/L.Grid.css" />
	<link rel="stylesheet" href="./leaflet-0.7.3/L.Control.Marker.css" />
	<link rel="stylesheet" href="./minimap/Control.MiniMap.css" />
    <link rel="stylesheet" href="./L.Control.Zoomslider.css" />
	<link rel="stylesheet" href="./L.Control.Locate.css" />
	<script src="./styledLayerControl.js"></script>
	<script src="./leaflet-search.js"></script>
	<script src="./leaflet-0.7.3/L.Grid.js"></script>
	<script src="./leaflet-0.7.3/L.Control.Marker.js"></script>
	<script src="./minimap/Control.MiniMap.js" type="text/javascript"></script>
    <script src="./L.Control.Zoomslider.js" ></script>
	<script src="./L.Control.Locate.js"></script>
	<!-- other plugins -->
	<script src="./leaflet-google.js"></script>
	<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
	<!--
	<link rel="stylesheet" href="../src/leaflet.groupedlayercontrol.css" />
	<script src="../src/leaflet.groupedlayercontrol.js"></script>
	<script src="./Bing.js"></script>
	<script src="./google-api.js"></script>
	<script src="L.Control.Locate.js"></script>
	<link rel="stylesheet" href="L.Control.Locate.css" />
	-->
</head>
	<body style="margin:0px; transform:scale(1); transform-origin: 0 0" onhashchange="set_view()" onbeforeunload="delete_permahash()" >	
	
	<div id="map" style="position: relative; width: 100%; height: 100%"></div>

	<script>
		String.prototype.contains = function(it) { return this.indexOf(it) != -1; };

		var lock=false;
		var permahash=false;
		var next=false;
		var marker=null;
		var maxzoom_std=20;
		var maxzoom_osm=19;
		var maxzoom_topo=16
		var maxzoom_g_sat=20;
		var maxzoom_esri_sat=18;
		var maxzoom_amap=13;
		var minzoom_amap=8
		var southWest = L.latLng(46.2520,8.7891),
			northEast = L.latLng(49.2714,17.6660),
			boundsAUT = L.latLngBounds(southWest, northEast);
		
		function cookie_read(cookiename) {
			var cookies=document.cookie.split("; ");
			for(var i=0;i<cookies.length;i++) {
				var a=cookies[i].split("=");
				if(a[0] == cookiename) {
					a.shift();
					return a.join("=");
				}
			}
			return null;
		}

		function delete_permahash(){
			document.cookie="permahash=;";
		}

		/* overloaded function to set browser hash and cookie 
		*	no parameter: normal mode
		*	with parameter: update marker hash
		*/
		function set_hash(marker_position) {
			var digits=Math.ceil(2*Math.log(map.getZoom())-1);
			var position=map.getZoom()+"/"+map.getCenter().lat.toFixed(digits)+"/"+map.getCenter().lng.toFixed(digits);
			var e=new Date;e.setYear(e.getFullYear()+10);
			document.cookie="map="+position+" ;expires="+e;
			if(marker==null) {
				if(next==true){
					window.location.hash="map="+position;
					next=false;
				} else {
					window.location.replace('#map='+position);
				}
				if((permahash==true) || (cookie_read("permahash")==window.location.hash.substr(1))){
					next=true;
					permahash=false;
					document.cookie="permahash="+position;
				}
			} else if(marker_position!=null) {
				window.location.hash="marker="+map.getZoom()+"/"+marker_position.lat.toFixed(digits)+"/"+marker_position.lng.toFixed(digits);
			}
		}

		function set_view() {
			if(lock==false) {
				var hash=window.location.hash;
				if((hash.contains("map")) && (hash.split("/").length-1 == 2)) {
					var position = hash.substr(1).split("map=")[1].split("/");
					if(isValid(position)) {
						map.setView(new L.LatLng(position[1], position[2]), position[0]);
					}
					if(marker!=null) {
						map.removeLayer(marker);
						marker=null;
					}
				} else if((hash.contains("marker")) && (hash.split("/").length-1 == 2)) {
					var position = hash.substr(1).split("marker=")[1].split("/");
					if((marker==null) && (isValid(position))){
						map.setView(new L.LatLng(position[1], position[2]), position[0]);
						marker = L.marker([position[1], position[2]],{draggable:true}).addTo(map).on('dragend', function(event){set_hash(event.target.getLatLng())});
					} else if((marker!=null) && (isValid(position))) {
						marker.setLatLng(new L.LatLng(position[1], position[2]));
					}
				} else if(cookie_read("map")) {
					var position = cookie_read("map").split("/");
					map.setView(new L.LatLng(position[1], position[2]), position[0]);
				} else {
					map.setView(new L.LatLng(46, 16), 5);
				}
				set_hash();
			}
			lock=false;
		}

		/* check if coordinates are valid numbers; if not zoom to Europe default */
		function isValid(p) {
			if(isNaN(p[0]) || (parseFloat(p[0]) != parseInt(p[0])) || isNaN(p[1]) || isNaN(p[2])) {
				window.location.replace("");
				map.setView(new L.LatLng(46, 16), 5);
				//alert("invalid coordinates");
				return false;
			} else {
				return true;
			}
		}
		
		
		
		//main function
		// create opentopomap layer
		var layerAdrTopo="http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png"
		var layerTopo = new L.TileLayer(layerAdrTopo,{maxZoom: maxzoom_topo+2, maxNativeZoom: maxzoom_topo, detectRetina: true, attribution: 'Kartendaten: Kartendaten: © <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>-Mitwirkende, SRTM | Kartendarstellung: © <a href="http://opentopomap.org">OpenTopoMap</a>'});
		
		//mapquest open (normal, sat und overlay)
		layerAdrMapquest="http://otile{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png"
		layerMapquest = new L.TileLayer(layerAdrMapquest,{ 
			maxZoom: maxzoom_osm,detectRetina: true, subdomains: '1234', attribution: 'Kartendaten: Maps © <a href="http://mapquest.com/">Mapquest</a>, Data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		layerMapqSatName="http://ttiles0{s}.mqcdn.com/tiles/1.0.0/vy/sat/{z}/{x}/{y}.png"
		//layerMapqSatName="http://otile{s}-s.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg"
		layerMapquestSat = new L.TileLayer(layerMapqSatName,{ 
			maxZoom: maxzoom_osm,detectRetina: true, subdomains: '1234', attribution: 'Kartendaten: Maps © <a href="http://mapquest.com/">Mapquest</a>, Data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		var layerOSMOvl = new L.TileLayer("http://otile{s}-s.mqcdn.com/tiles/1.0.0/hyb/{z}/{x}/{y}.png",
		   {maxZoom: maxzoom_osm,detectRetina: true, subdomains: '1234',attribution: 'Kartendaten: Maps © <a href="http://mapquest.com/">Mapquest</a>, Data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		
		// create osm cyclemap layer
		var layerAdrOSMCyle="http://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png"
		var layerOSMCycle = new L.TileLayer(layerAdrOSMCyle,{maxZoom: maxzoom_osm,detectRetina: true, attribution: 'Kartendaten: Maps © <a href="http://www.thunderforest.com">Thunderforest</a>, Data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		// create osm landscape layer
		var layerAdrOSMLands="http://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png"
		var layerOSMLands = new L.TileLayer(layerAdrOSMLands,{maxZoom: maxzoom_osm,detectRetina: true, attribution: 'Kartendaten: Maps © <a href="http://www.thunderforest.com">Thunderforest</a>, Data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		// create osm outdoors layer
		var layerAdrOSMOutd="http://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png"
		var layerOSMOutd = new L.TileLayer(layerAdrOSMOutd,{maxZoom: maxzoom_osm,detectRetina: true, attribution: 'Kartendaten: Maps © <a href="http://www.thunderforest.com">Thunderforest</a>, Data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		// create osm standard layer
		var layerAdrOSMStd = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
		layerOSMStd = new L.TileLayer(layerAdrOSMStd,{maxZoom: maxzoom_osm,detectRetina: true, attribution: 'Kartendaten: © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		// create osm standard overlay layer
		var layerAdrOSMStdDe = 'http://tile.geofabrik.de/23228979966ae9040ceb0597251e12a2/{z}/{x}/{y}.png'
		var layerOSMStdDe = new L.TileLayer(layerAdrOSMStdDe,{maxZoom: maxzoom_osm,detectRetina: true, attribution: 'Kartendaten: © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		//Basemap.at
		var layerAdrBasem="http://maps{s}.wien.gv.at/basemap/bmaphidpi/normal/google3857/{z}/{y}/{x}.jpg"
		var layerBasem = new L.TileLayer(layerAdrBasem,{ maxZoom: maxzoom_std, bounds: boundsAUT, detectRetina: true, subdomains: '1234', attribution: 'Kartendaten: © <a href="http://www.basemap.at">Basemap.at<a/>'});
		var layerAdrBasemOvl="http://maps{s}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png"
		var layerBasemOvl = new L.TileLayer(layerAdrBasemOvl,{ maxZoom: maxzoom_std, bounds: boundsAUT, detectRetina: true, transparent: true, format: 'image/png', subdomains: '1234', attribution: 'Kartendaten: © <a href="http://www.basemap.at">Basemap.at<a/>'});
		
		//Esri - Arcgis online
		var layerAdrEsriTopo="http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"
		var layerEsriTopo = new L.TileLayer(layerAdrEsriTopo,{ maxZoom: maxzoom_osm, attribution: 'Kartendaten: © ArGIS Online'});
		var layerAdrEsriStreet="http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"
		var layerEsriStreet = new L.TileLayer(layerAdrEsriStreet,{ maxZoom: maxzoom_osm, attribution: 'Kartendaten: © ArGIS Online'});
		var layerEsriGray = new L.TileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{ 
			maxZoom: maxzoom_osm, attribution: 'Kartendaten: © ArGIS Online'});
		var layerEsriWldImg = new L.TileLayer("http://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{ 
			maxZoom: maxzoom_esri_sat, attribution: 'Kartendaten: © ArGIS Online'});
		var layerEsriBoundOvlUrl="http://server.arcgisonline.com/arcgis/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}";
		var layerEsriBoundOvl = new L.TileLayer(layerEsriBoundOvlUrl,
		{ maxZoom: 13, opacity: 1, attribution: 'Kartendaten: © ArGIS Online'});
		var layerEsriWldRefOvlUrl="http://services.arcgisonline.com/arcgis/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}";
		var layerEsriWldRefOvl = new L.TileLayer(layerEsriWldRefOvlUrl,
		{ maxZoom: 9, opacity: 1, attribution: 'Kartendaten: © ArGIS Online'});
		
		 // Google layers
		var g_roadmap   = new L.Google('ROADMAP',{maxZoom: maxzoom_std,attribution: 'Kartendaten: © Google'});
		var g_satellite = new L.Google('SATELLITE', {maxZoom: maxzoom_g_sat,attribution: 'Kartendaten: © Google'});
		var g_hybrid   = new L.Google('HYBRID', {maxZoom: maxzoom_g_sat,attribution: 'Kartendaten: © Google'});
		var g_terrain   = new L.Google('TERRAIN',{maxZoom: maxzoom_topo,attribution: 'Kartendaten: © Google'});
		
		// Bing layers
		//var bing1 = new L.BingLayer("AvZ2Z8Jve41V_bnPTe2mw4Xi8YWTyj2eT87tSGSsezrYWiyaj0ldMaVdkyf8aik6", {type: 'Aerial'});
		//var bing2 = new L.BingLayer("AvZ2Z8Jve41V_bnPTe2mw4Xi8YWTyj2eT87tSGSsezrYWiyaj0ldMaVdkyf8aik6", {type: 'Road'});
		
		//apple layers
		layerAdrAppleStd="https://cdn{s}.apple-mapkit.com/tp/tile?type=tile&style=0&size=1&x={x}&y={y}&z={z}&scale=1&lang=de-DE&imageFormat=jpg&vendorkey=546bccd01bb595c1ae74836bf94b56735aa7f907&cacheVersion=8&v=1501132"
		layerAppleStd = new L.TileLayer(layerAdrAppleStd,{ maxZoom: maxzoom_std, detectRetina: true, subdomains: '1234', attribution: 'Kartendaten: © Apple Inc.'});
		layerAdrAppleSat="https://sat-cdn{s}.apple-mapkit.com/tile?style=7&size=1&scale=1&z={z}&x={x}&y={y}&vendorkey=546bccd01bb595c1ae74836bf94b56735aa7f907&v=203"
		layerAppleSat = new L.TileLayer(layerAdrAppleSat,{ maxZoom: maxzoom_g_sat, detectRetina: true, subdomains: '1234', attribution: 'Kartendaten: © Apple Inc.'});
		layerAdrAppleOverlay="https://cdn{s}.apple-mapkit.com/tp/tile?type=tile&style=46&size=1&x={x}&y={y}&z={z}&scale=1&lang=de-DE&imageFormat=png&vendorkey=546bccd01bb595c1ae74836bf94b56735aa7f907&cacheVersion=8&v=1501132"
		layerAppleOverlay = new L.TileLayer(layerAdrAppleOverlay,{ maxZoom: maxzoom_g_sat,detectRetina: true, 	transparent: true, format: 'image/png', subdomains: '1234', attribution: 'Kartendaten: © Apple Inc.'});
		
		
		//ÖPNV "http://tile.memomaps.de/tilegen/14/8575/5624.png"
		layerÖPNV = new L.TileLayer("http://tile.memomaps.de/tilegen/{z}/{x}/{y}.png",{ 
			maxZoom: maxzoom_std,detectRetina: true, attribution: 'Kartendaten: © ÖPNV'});
		
		//Geofabrik topo "http://a.tile.geofabrik.de/15173cf79060ee4a66573954f6017ab0/14/8574/5625.png"
		layerGeofTopo = new L.TileLayer("http://{s}.tile.geofabrik.de/15173cf79060ee4a66573954f6017ab0/{z}/{x}/{y}.png",{ 
			maxZoom: maxzoom_std,detectRetina: true, attribution: 'Kartendaten: © Geofabrik'});
		
		//Nokia here-maps 
		layerNokia = new L.TileLayer("http://{s}.base.maps.api.here.com/maptile/2.1/maptile/newest/normal.day/{z}/{x}/{y}/256/png8?app_id=g7UuRR708Tsut4YSnDLy&token=fVzaDAdRK62zo3CuNcPtDg&lg=ENG",{ 
			maxZoom: maxzoom_std,detectRetina: true, subdomains: '1234', format: 'image/png', attribution: 'Kartendaten: © Nokia Here-maps'});
		//https://4.aerial.maps.api.here.com/maptile/2.1/maptile/9df27a24fa/hybrid.day/11/1118/710/256/png8?app_id=xWVIueSv6JL0aJ5xqTxb&app_code=djPZyynKsbTjIUDOBcHZ2g&lg=ger&ppi=72
		layerNokiaSat = new L.TileLayer("http://{s}.aerial.maps.api.here.com/maptile/2.1/maptile/9df27a24fa/satellite.day/{z}/{x}/{y}/256/png8?app_id=xWVIueSv6JL0aJ5xqTxb&app_code=djPZyynKsbTjIUDOBcHZ2g&lg=ger&ppi=72",{ 
			maxZoom: maxzoom_g_sat,detectRetina: true, subdomains: '1234', format: 'image/png', attribution: 'Kartendaten: © Nokia Here-maps'});
		layerNokiaHybrid = new L.TileLayer("http://{s}.aerial.maps.api.here.com/maptile/2.1/maptile/9df27a24fa/hybrid.day/{z}/{x}/{y}/256/png8?app_id=xWVIueSv6JL0aJ5xqTxb&app_code=djPZyynKsbTjIUDOBcHZ2g&lg=ger&ppi=72",{ 
			maxZoom: maxzoom_g_sat,detectRetina: true, subdomains: '1234', format: 'image/png', attribution: 'Kartendaten: © Nokia Here-maps'});
		
		//layerMapireJosef = new L.TileLayer("http://tiles.mapire.eu/firstsurvey/lower-austria_g.jp2/{x}/{y}/{z}",{ 
		//	maxZoom: maxzoom_std,detectRetina: true, format: 'image/jp2', attribution: 'Kartendaten: © Mapire'});
		
		lyerAdrOSMLyrk="http://{s}.tiles.lyrk.org/ls/{z}/{x}/{y}?apikey=3949c1b430e64bbe98886bc44e4eb8e4";
		layerOSMLyrk = new L.TileLayer(lyerAdrOSMLyrk,{ 
			maxZoom: maxzoom_std,detectRetina: true, format: 'image/png', attribution: 'Karten: © LyrkGeodienste, Data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		layerOSMLyrkRetina = new L.TileLayer("http://{s}.tiles.lyrk.org/lr/{z}/{x}/{y}?apikey=3949c1b430e64bbe98886bc44e4eb8e4",{ 
			maxZoom: maxzoom_std,detectRetina: true, format: 'image/png', attribution: 'Karten: © LyrkGeodienste, Data © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'});
		
		
		//stemen watercolor
		//layerStamenWaterc = new L.TileLayer("http://tile.stamen.com/watercolor/{z}/{x}/{y}.jpg",{ 
		//	maxZoom: maxzoom_std,detectRetina: true, format: 'image/jpg', attribution: 'Kartendaten: © Stamen'});
		
		// open piste map (opacity: 0.5,)
		var layerOpPisteMapLandsh = new L.TileLayer("http://tiles{s}.openpistemap.org/landshaded/{z}/{x}/{y}.png",
		{maxZoom: maxzoom_std,detectRetina: true, subdomains: '2', transparent: true, opacity: 0.75, format: 'image/png',attribution: 'Kartendaten: © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>, <a href="openpistemap.org">Openpistemap</a>'});
		var layerOpPisteMap = new L.TileLayer("http://tiles.openpistemap.org/nocontours/{z}/{x}/{y}.png",
		{maxZoom: maxzoom_std,detectRetina: true, transparent: true, format: 'image/png',attribution: 'Kartendaten: © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>, <a href="openpistemap.org">Openpistemap</a>'});
		
		// opengeoserver globe-areal
		//var layerOpGeoAerial = new L.TileLayer("http://services.opengeoserver.org/tiles/1.0.0/globe.aerial_EPSG3857/{z}/{x}/{y}.png?origin=nw",
		//{maxZoom: open_sat_maxzoom,detectRetina: true, format: 'image/png', attribution: 'Kartendaten: © opengeoserver.org'});
		
		//Bergfex AMap Karte
		layerBergfexAmapUrl="http://static{s}.bergfex.com/images/amap/{z}/{z}_{x}_{y}.png";
		layerBergfexAmapUrl_14="http://static{s}.bergfex.com/images/amap/{z}/89/{z}_{x}_{y}.png";
		layerBergfexAmapUrl_14b="http://static{s}.bergfex.com/images/amap/{z}/88/{z}_{x}_{y}.png";
		layerBergfexAmapUrl_15="http://static{s}.bergfex.com/images/amap/{z}/178/{z}_{x}_{y}.png";
		var layerBergfexAmap = new L.TileLayer(layerBergfexAmapUrl,
		{maxZoom: maxzoom_amap+2, minZoom: minzoom_amap, maxNativeZoom: maxzoom_amap, bounds: boundsAUT, subdomains: '1234567', detectRetina: true, format: 'image/png', attribution: 'Kartendaten: © Map Data 2008, 2013 BEV, bergfex GmbH'});
		var layerBergfexAmap_14 = new L.TileLayer(layerBergfexAmapUrl_14,
		{maxZoom: maxzoom_amap+1, minZoom: maxzoom_amap+1, subdomains: '1234567', detectRetina: true, format: 'image/png', attribution: 'Kartendaten: © Map Data 2008, 2013 BEV, bergfex GmbH'});
		var layerBergfexAmap_14b = new L.TileLayer(layerBergfexAmapUrl_14b,
		{maxZoom: maxzoom_amap+1, minZoom: maxzoom_amap+1, subdomains: '1234567', detectRetina: true, format: 'image/png', attribution: 'Kartendaten: © Map Data 2008, 2013 BEV, bergfex GmbH'});
		var layerBergfexAmap_15 = new L.TileLayer(layerBergfexAmapUrl_15,
		{maxZoom: maxzoom_amap+2, minZoom: maxzoom_amap+2, subdomains: '1234567', detectRetina: true, format: 'image/png', attribution: 'Kartendaten: © Map Data 2008, 2013 BEV, bergfex GmbH'});
		
		var layerBergfexAmapGrp=L.layerGroup([layerBergfexAmap,layerBergfexAmap_14,layerBergfexAmap_14b,layerBergfexAmap_15],{bounds: boundsAUT});
		
		//tomtom
		var layerTomtomUrl="https://{s}.api.tomtom.com/lbs/map/3/basic/1/{z}/{x}/{y}.png?key=26m229t628ghqqdu5t27xjzf";
		var layerTomtom = new L.TileLayer(layerTomtomUrl,
		{maxZoom: maxzoom_osm, detectRetina: true, subdomains: 'abcd', format: 'image/png', attribution: 'Kartendaten: © Tomtom'});
		
		//http://b.tiles.telegeography.com/maps/submarine-cable-map-2015/5/13/14.png
		//var layerSubmCableUrl="http://{s}.tiles.telegeography.com/maps/submarine-cable-map-2015/{z}/{x}/{y}.png";
		//var layerSubmCable = new L.TileLayer(layerSubmCableUrl,
		//{maxZoom: maxzoom_std, detectRetina: true, subdomains: 'abcd', format: 'image/png', attribution: 'Kartendaten: © Telegeography'});
		
		// Koord.grid
		var grid = L.grid({redraw: 'moveend'});
		
		var baseMaps = [
			{groupName : "OSM Standard",
				expanded : true,
				layers    : {
					"Mapquest Open": layerMapquest,
					"OpenStreetMap Lyrk Geodienste": layerOSMLyrk,
					"OpenStreetMap Deutschland": layerOSMStdDe,
					"OpenStreetMap Standard": layerOSMStd,
				}
			},
			{groupName : "Standard Karten",
				expanded : false,
				layers    : {
					"Apple Standard": layerAppleStd,
					"Nokia Here-maps": layerNokia,
					"Tomtom Standard": layerTomtom,
					"Esri Street Map": layerEsriStreet,
					"Basemap.at": layerBasem,
					"Google Standard": g_roadmap,
				}
			},
			{groupName : "Topographische",
				expanded : false,
				layers    : {
					"OpenTopoMap": layerTopo,
					"Geofabrik Topo": layerGeofTopo,
					"OpenStreetMap Landscape": layerOSMLands,
					"AMap (Bergfex)": layerBergfexAmapGrp,
					"Esri Topo Map": layerEsriTopo,
					"Google Terrain":  g_terrain,
				}
			},
			{groupName : "Themen und Diverse",
				expanded : false,
				layers    : {
					"OpenStreetMap Outdoors": layerOSMOutd,
					"OpenStreetMap Cycle": layerOSMCycle,
					"ÖPNV Verkehrskarte": layerÖPNV,
					"Esri light gray": layerEsriGray,
				}
			},
			{groupName : "Satellit",
				expanded : false,
				layers    : {
					"Apple Satellit": layerAppleSat,
					"Nokia Here-maps Satellit": layerNokiaSat,
					"Nokia Here-maps Hybrid": layerNokiaHybrid,
					"Mapquest Satellit": layerMapquestSat,
					"Esri Satellit": layerEsriWldImg,
					"Google Satellit":  g_satellite,
					"Google Hybrid": g_hybrid,
				}
			}
			//,
			//{groupName : "Bing Karten",
			//	expanded : true,
			//	layers    : {
			//		"Bing Standard"  :  bing2,
			//		"Bing Satellit" :  bing1
			//	}
			//}
		]
		var overlayMaps = [
			 {
				groupName : "Overlays",
				expanded : true,
				layers    : { 
					"Mapquest Beschriftungen": layerOSMOvl,
					"Apple Beschriftungen": layerAppleOverlay,
					"Esri Boundaries": layerEsriBoundOvl,
					"Esri World Reference": layerEsriWldRefOvl,
					"Basemap.at Beschriftungen": layerBasemOvl,
					"OSM Terrain": layerOpPisteMapLandsh,
					"OSM Schipisten": layerOpPisteMap,
					"Gradnetz": grid
				}
			}
		]
		var options = {
				container_width 	: "220px",
				group_maxHeight     : "200px",
				container_maxHeight : "550px", 
				exclusive       	: false
		};

		map = new L.Map('map');
		map.attributionControl.setPrefix(false);
		map.dragging.enable();
		map.touchZoom.enable();
		map.doubleClickZoom.enable();
		map.scrollWheelZoom.enable();
		map.addControl( new L.Control.Search({
			url: 'https://nominatim.openstreetmap.org/search?format=json&accept-language=de-DE&q={s}',
			jsonpParam: 'json_callback', propertyName: 'display_name', propertyLoc: ['lat','lon'],
			markerLocation: true, autoType: true, autoCollapse: true, minLength: 2,zoom: 13,
			text: 'Suchen...', textCancel: 'Abbrechen', textErr: 'Kein Ergebnis gefunden!'}) );
		
		L.control.locate({
			follow: true,
			title: "Position bestimmen",
			popupText: ["Sie befinden sich innerhalb "," von diesem Punkt"]
		}).addTo(map);
		
		if(window.location.hash) {
			document.cookie="permahash="+window.location.hash.substr(1);
			permahash=true;
		}
		set_view();
		
		map.addControl(new L.Control.Scale({width: 250, position: 'bottomleft', imperial: false}));
		
		var layersControl = L.Control.styledLayerControl(baseMaps, overlayMaps, options);
		map.addControl(layersControl);
		map.addLayer(layerMapquest); //Standardlayer
		
		var miniMapLayer = new L.TileLayer(layerAdrMapquest, {minZoom: 0, maxZoom: 13, subdomains: '1234', attribution: 'Kartendaten: © <a href="http://mapquest.com/">Mapquest</a>' });
		var miniMap = new L.Control.MiniMap(miniMapLayer, { toggleDisplay: true, zoomLevelOffset: -7 }).addTo(map);
		
		map.on('moveend', function(e) {
			lock=true;
			set_hash();
		});
		map.on('baselayerchange', function(e) {
			if(!((e.name=="Google Satellit")||(e.name=="Google Hybrid"))&&(map.getZoom()>maxzoom_std)){
				map.setZoom(maxzoom_std);
			}
			if(((e.name=="OpenTopoMap")||(e.name=="Google Terrain"))&&(map.getZoom()>maxzoom_topo)) {
				map.setZoom(maxzoom_topo);
			}
			else if(e.name=="AMap (Bergfex)"){
				if (map.getZoom()>maxzoom_amap+1) {
					map.setZoom(maxzoom_amap);
				}
			    else if(map.getZoom()<minzoom_amap) {
					map.setZoom(minzoom_amap);
				}
			}
		});
		
		L.control.marker().addTo(map);
	</script>
</body>
</html>