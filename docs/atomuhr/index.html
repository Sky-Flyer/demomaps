<!DOCTYPE HTML>
<html>
 <head>
  <!-- 
     (c) PTB, Dr.-Ing. M. Gutbrod
     Dank an R. Appel für die SVG Vorlage, http://www.3Quarks.com/de/Bahnhofsuhr/
     Version: 1.1
  -->
  <script src="jquery.js"></script>
  <script src="socket.io/socket.io.js"></script>
  <script src="knockout.js"></script>
  <title>PTB Uhr</title>
 </head>
 <body>
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 200 200" baseProfile="full" style="display:block;margin-left:auto;margin-right:auto;min-width:200px;height:90vh;max-width:90vw;">
   <defs>
    <!-- hour stroke (DIN 41091.4) -->
    <symbol id="hourStrokeDIN41091.4">
     <rect x="97" y="0" width="6" height="7"/>
    </symbol>
    <!-- minute stroke (DIN 41091.4) -->
    <symbol id="minuteStrokeDIN41091.4">
     <rect x="98.75" y="0" width="2.5" height="7"/>
    </symbol>
    <!-- five minutes strokes (DIN 41091.4) -->
    <symbol id="fiveMinutesStrokesDIN41091.4">
     <use xlink:href="#hourStrokeDIN41091.4"/>
     <use xlink:href="#minuteStrokeDIN41091.4" transform="rotate( 6, 100, 100)"/>
     <use xlink:href="#minuteStrokeDIN41091.4" transform="rotate(12, 100, 100)"/>
     <use xlink:href="#minuteStrokeDIN41091.4" transform="rotate(18, 100, 100)"/>
     <use xlink:href="#minuteStrokeDIN41091.4" transform="rotate(24, 100, 100)"/>
    </symbol>
    <!-- quarter strokes (DIN 41091.4) -->
    <symbol id="quarterStrokesDIN41091.4">
     <use xlink:href="#fiveMinutesStrokesDIN41091.4"/>
     <use xlink:href="#fiveMinutesStrokesDIN41091.4" transform="rotate(30, 100, 100)"/>
     <use xlink:href="#fiveMinutesStrokesDIN41091.4" transform="rotate(60, 100, 100)"/>
    </symbol>
    <!-- Sichbare Bereich Ziffenblatt-->
    <clipPath id="dialCircle">
     <circle cx="100" cy="100" r="100"/>
    </clipPath>
   </defs>
   <g xmlns="http://www.w3.org/2000/svg" id="clock" clip-path="url(#dialCircle)" visibility="visible">
    <!-- Hintergrund -->
    <g id="background" data-bind="style: {fill: connected() ? 'rgb(200,200,200)' : 'rgb(255,178,178)'}">
     <circle cx="100" cy="100" r="100" style="stroke:none"/>
    </g>
    <!-- PTB Logo -->
    <g style="stroke:none" transform="translate(31,92) scale(.3)">
     <path fill="#0FA1D5" d="M99.37,25.369c0.977-2.381,1.465-5.053,1.465-8.014c0-2.229-0.314-4.266-0.938-6.115
        c-0.626-1.844-1.518-3.471-2.679-4.875c-1.159-1.403-2.572-2.587-4.235-3.549c-1.664-0.959-3.297-1.616-4.9-1.967
        c-1.6-0.352-2.99-0.581-4.164-0.689c-1.176-0.104-2.404-0.158-3.687-0.158H67.55h-3.113V3.39v54.672v1.467h0.873h1.196h1.876h1.858
        h1.245h0.823c0,0,0.003-1.22,0.003-1.467V36.725h6.73c3.662,0,6.814-0.46,9.453-1.376c2.641-0.914,4.869-2.214,6.686-3.892
        C96.997,29.778,98.394,27.751,99.37,25.369 M91.724,22.919c-0.55,1.509-1.357,2.808-2.426,3.891
        c-1.068,1.086-2.387,1.933-3.961,2.544c-1.57,0.608-3.548,0.915-5.928,0.915h-7.098V6.503h7.278c1.345,0,2.726,0.105,4.144,0.319
        c1.42,0.212,2.795,0.718,4.121,1.51c1.328,0.796,2.444,2.001,3.342,3.618c0.902,1.617,1.352,3.634,1.352,6.045
        C92.548,19.768,92.272,21.406,91.724,22.919"/>
     <path fill="#0FA1D5" d="M162.208,37.021c-0.584-1.638-1.395-3.091-2.404-4.318c-1.007-1.215-2.201-2.233-3.549-3.026
        c-1.345-0.79-2.814-1.343-4.366-1.64l-1.639-0.315l1.529-0.667c1.229-0.533,2.331-1.226,3.274-2.056
        c0.955-0.837,1.751-1.79,2.365-2.833c0.632-1.049,1.113-2.217,1.434-3.476c0.324-1.256,0.489-2.592,0.489-3.973
        c0-2.313-0.375-4.411-1.108-6.234c-0.729-1.813-1.828-3.36-3.27-4.601c-1.441-1.25-3.281-2.218-5.463-2.878
        c-2.196-0.666-5.072-1.003-8.545-1.003h-7.844V5.49h7.41c2.293,0,4.174,0.227,5.594,0.678c1.44,0.457,2.63,1.131,3.535,2.006
        c0.909,0.883,1.583,1.962,2.004,3.211c0.412,1.238,0.619,2.625,0.619,4.125c0,1.355-0.2,2.684-0.596,3.949
        c-0.4,1.298-1.047,2.444-1.911,3.41c-0.867,0.967-1.974,1.746-3.286,2.315c-1.306,0.571-3.033,0.859-5.135,0.859h-9.468V6.837
        h-6.792v52.691h17.901c1.833,0,3.866-0.21,6.043-0.628c1.577-0.294,2.883-0.861,4.263-1.458l0.248-0.108
        c1.455-0.628,2.787-1.418,3.959-2.352c1.156-0.925,2.16-2.015,2.979-3.239c0.824-1.226,1.473-2.628,1.928-4.167
        c0.457-1.542,0.689-3.257,0.689-5.096C163.097,40.503,162.798,38.667,162.208,37.021z M154.931,47.588
        c-0.607,1.34-1.461,2.474-2.536,3.376c-1.069,0.895-2.319,1.575-3.715,2.025c-1.391,0.452-3.026,0.679-4.864,0.679h-11.937V31.39
        h9.929c2.5,0,4.615,0.248,6.287,0.741c1.699,0.507,3.131,1.257,4.256,2.227c1.137,0.977,2.014,2.201,2.607,3.641
        c0.59,1.425,0.89,3.092,0.89,4.95C155.848,44.69,155.539,46.251,154.931,47.588z"/>
     <path fill="#0FA1D5" d="M107.223,5.653v53.876h7.876V5.653h16.66c0.043,0,0.092-0.001,0.146-0.001v-5.65h-42.97
        c1.492,0.396,3.319,1.026,4.85,1.91c1.749,1.013,3.252,2.271,4.477,3.741"/>
     <rect fill="#0FA1D5" width="59.528" height="59.529"/>    
     <g>
      <path fill="#FFFFFF" d="M29.451,17.107l0.348-0.161c4.923-2.26,10.366-3.448,15.751-3.45l0,0c1.732,0.002,3.476,0.121,5.189,0.357
        l0,0l0.377,0.052l-2.74,17.6l-0.359-0.043c-0.805-0.101-1.627-0.151-2.447-0.149l0,0c-2.727-0.002-5.506,0.583-8.026,1.682l0,0
        l-0.331,0.144L29.451,17.107L29.451,17.107z M37.394,32.651l0.336-0.164L37.394,32.651L37.394,32.651z M37.574,32.165
        c2.528-1.048,5.28-1.603,7.995-1.603l0,0c0.729,0,1.459,0.038,2.18,0.114l0,0l2.509-16.13c-1.558-0.197-3.139-0.299-4.708-0.299
        l0,0c-5.146,0-10.359,1.113-15.09,3.223l0,0L37.574,32.165L37.574,32.165z"/>
      <path fill="#FFFFFF" d="M17.06,48.442l0.05-0.383c0.071-0.583,0.159-1.164,0.261-1.733l0,0l0.066-0.379l8.402,1.734l-0.058,0.359
        c-0.048,0.277-0.091,0.56-0.128,0.84l0,0l-0.045,0.359L17.06,48.442L17.06,48.442z M25.282,48.833l0.033-0.373L25.282,48.833
        L25.282,48.833z M24.96,48.427c0.008-0.052,0.016-0.104,0.023-0.154l0,0l-6.939-1.434c-0.051,0.307-0.098,0.616-0.141,0.928l0,0
        L24.96,48.427L24.96,48.427z"/>
      <path fill="#FFFFFF" d="M15.61,52.625c-0.014-0.389-0.022-0.785-0.022-1.181l0,0c0-0.451,0.009-0.903,0.028-1.348l0,0l0.02-0.384
        l9.877,0.664l-0.012,0.364c-0.009,0.235-0.013,0.47-0.013,0.707l0,0c0,0.192,0.002,0.38,0.009,0.571l0,0l0.012,0.365l-9.498,0.602
        l-0.386,0.024L15.61,52.625L15.61,52.625z M15.985,52.614l0.375-0.015L15.985,52.614L15.985,52.614z M16.338,51.445
        c0,0.255,0.004,0.513,0.011,0.77l0,0l8.391-0.532c-0.001-0.078-0.002-0.156-0.002-0.233l0,0c0-0.123,0.002-0.247,0.004-0.37l0,0
        l-8.389-0.564C16.343,50.823,16.338,51.134,16.338,51.445L16.338,51.445z"/>
      <path fill="#FFFFFF" d="M15.05,58.404c-0.262-1.155-0.46-2.32-0.588-3.478l0,0l-0.043-0.382l11.174-1.015l0.045,0.36
        c0.076,0.621,0.178,1.217,0.303,1.786l0,0l0.077,0.354l-10.51,2.654l-0.374,0.093L15.05,58.404L15.05,58.404z M15.417,58.321
        l0.365-0.084L15.417,58.321L15.417,58.321z M15.699,57.861l9.435-2.381c-0.073-0.369-0.137-0.748-0.192-1.137l0,0l-9.69,0.88
        C15.36,56.101,15.511,56.984,15.699,57.861L15.699,57.861z"/>
      <path fill="#FFFFFF" d="M25.826,58.063c0.165,0.494,0.354,0.983,0.557,1.466H27.2c-0.295-0.664-0.555-1.349-0.771-2.037
        l-0.109-0.347l-8.529,2.384h2.789L25.826,58.063z"/>
      <path fill="#FFFFFF" d="M57.698,34.467l1.83-2.873v-1.397l-2.851,4.472l0.298,0.208c0.91,0.625,1.754,1.353,2.553,2.127v-1.043
        C58.942,35.432,58.339,34.924,57.698,34.467z"/>
      <path fill="#FFFFFF" d="M55.442,33.065c-1.594-0.855-3.289-1.495-5.055-1.911l2.675-14.764c2.229,0.476,4.386,1.179,6.466,2.056
        v-0.813c-2.104-0.865-4.28-1.558-6.531-2.024l-0.162-0.031l-0.375-0.074l-2.938,16.225l0.354,0.078
        c1.941,0.423,3.794,1.122,5.52,2.089l0.316,0.179l0.188-0.313l3.629-6.035v-1.456L55.442,33.065z M55.578,33.568l0.183-0.329
        L55.578,33.568z"/>
      <path fill="#FFFFFF" d="M49.398,33.027c-1.269-0.261-2.556-0.393-3.827-0.393c-4.266,0-8.453,1.479-11.789,4.173
        c-3.386,2.724-5.732,6.574-6.616,10.836c-0.265,1.276-0.395,2.562-0.395,3.84c0,2.781,0.625,5.521,1.831,8.046h0.844
        c-1.266-2.515-1.926-5.255-1.926-8.046c0-1.227,0.125-2.462,0.381-3.687c0.847-4.093,3.103-7.79,6.352-10.407
        c3.201-2.584,7.226-4.005,11.318-4.005c1.221,0,2.457,0.126,3.676,0.378c4.088,0.847,7.669,3.026,10.281,6.209v-1.125
        C56.866,35.891,53.362,33.847,49.398,33.027z"/>
      <path fill="#FFFFFF" d="M7.452,42.219l0.094-0.366c2.689-10.684,9.801-19.783,19.537-24.997l0,0l0.334-0.181l11.08,21.617
        l-0.334,0.171l0.334-0.171l0.165,0.319l-0.312,0.178c-3.279,1.879-5.751,4.987-6.797,8.701l0,0l-0.096,0.344L7.452,42.219
        L7.452,42.219z M30.934,46.943c1.117-3.638,3.544-6.691,6.735-8.623l0,0L27.099,17.7c-9.264,5.08-16.055,13.773-18.73,23.965l0,0
        L30.934,46.943L30.934,46.943z"/>
     </g>
    </g>
    <!-- Ziffernblatt -->
    <g id="dial" style="fill:#0FA1D5; stroke:#0FA1D5">
     <use xlink:href="#quarterStrokesDIN41091.4" xmlns:xlink="http://www.w3.org/1999/xlink" style="stroke:none"/>
     <use xlink:href="#quarterStrokesDIN41091.4" xmlns:xlink="http://www.w3.org/1999/xlink" style="stroke:none" transform="rotate( 90, 100, 100)"/>
     <use xlink:href="#quarterStrokesDIN41091.4" xmlns:xlink="http://www.w3.org/1999/xlink" style="stroke:none" transform="rotate(180, 100, 100)"/>
     <use xlink:href="#quarterStrokesDIN41091.4" xmlns:xlink="http://www.w3.org/1999/xlink" style="stroke:none" transform="rotate(270, 100, 100)"/>
     <g text-anchor="middle" letter-spacing="-2" font-family="sans-serif" font-size="24px" style="stroke:none">
      <text x="100" y="30">12</text>
      <text x="143" y="41">1</text>
      <text x="171" y="70">2</text>
      <text x="182" y="109">3</text>
      <text x="171" y="147">4</text>
      <text x="142" y="176">5</text>
      <text x="100" y="188">6</text>
      <text x="60" y="176">7</text>
      <text x="30" y="147">8</text>
      <text x="18" y="109">9</text>
      <text x="34" y="70">10</text>
      <text x="61" y="41">11</text>
      <g letter-spacing="-0.2" font-size="12px">
       <text x="100" y="55" id="ptbtime" data-bind="text: ptbtime"></text>
       <text x="100" y="64" id="localtimezone" font-size="8px" data-bind="text: localtimezone"></text>
      </g>
      <text x="145" y="90" font-size="6px" letter-spacing="-0.3" data-bind="visible: connected() && leapSec()" style="fill:rgb(232,33,34)">
      <tspan font-weight="bold">Schaltsekunde!</tspan>
      <tspan x="145" y="96">Die Sekunde</tspan>
      <tspan x="145" y="102" data-bind="text: leapSec">--.--.---- --:--:--</tspan>
      <tspan x="145" y="108" data-bind="text: leap()==1 ? 'wird wiederholt' : 'wird übersprungen'"></tspan><tspan>.</tspan></text>
      <g text-anchor="middle" letter-spacing="-0.2" font-family="sans-serif" font-size="9px" style="stroke:none;cursor:pointer;" data-bind="click: clickDelta" title="Abweichung und Unsicherheit ein- und ausblenden.">
       <text x="100" y="130" data-bind="visible: (connected() && deltaShow())">Lokale Zeitabweichung:</text>
       <text x="100" y="139" id="offset" data-bind="text: offset, visible: (connected() && deltaShow())"></text>
       <text x="100" y="139" data-bind="visible: !connected()" font-weight="bold" style="cursor:default;">Verbindung unterbrochen!</text>
       <text x="100" y="150" data-bind="visible: (!deltaShow() && connected())" font-size="7px" style="text-decoration:underline;">Abweichung</text>
       <text x="100" y="152" data-bind="visible: (connected() && deltaShow())" font-size="8px">Unsicherheit:</text>
       <text x="100" y="159" data-bind="text: accuracy, visible: (connected() && deltaShow())" font-size="8px"></text>
      </g>
     </g>
    </g>
    <!-- hour hand -->
    <g id="hourHand" data-bind="attr: {transform: hourHand}" style="fill:#0FA1D5; fill-opacity: 0.6" transform="rotate(300, 100, 100)">
     <polygon points="94,46 100,40 106,46 106,118 94,118" style="stroke:none"/>
    </g>
    <!-- minute hand -->
    <g id="minuteHand" data-bind="attr: {transform: minuteHand}" style="fill:#0FA1D5; fill-opacity: 0.6" transform="rotate(0, 100, 100)">
     <polygon points="95.5,11.5 100,7 104.5,11.5 104.5,122 95.5,122" style="stroke:none"/>
    </g>
    <!-- second hand -->
    <g id="secondHand"  data-bind="attr: {transform: secondHand}" style="fill:rgb(232,33,34); stroke:rgb(232,33,34); fill-opacity: 0.9" transform="rotate(120, 100, 100)">
     <polygon points="98,4 102,4 102.3,36 97.7,36" style="stroke:none"/>
     <circle cx="100" cy="45" r="10" style="fill:none; stroke-width:4"/>
     <polygon points="97.5,56 102.5,55 103,102 97,102" style="stroke:none"/>
    </g>
   </g>
  </svg>
  <script src="uhr.js"></script>
</body>
</html>

